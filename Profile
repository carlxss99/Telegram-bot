// /profile
var lang = User.getProperty("language") || "en"; // Obtener el idioma del usuario, predeterminado a inglÃ©s

// Mensajes en diferentes idiomas con mÃ¡s emojis para hacerlo mÃ¡s interactivo
var messages = {
  en: {
    notRegistered: "âš ï¸ First, you must register using /register.",
    profileHeader: "ğŸ“„ User Profile",
    username: "ğŸ‘¤ Username: %s",
    points: "ğŸ’° Accumulated Points: %d",
    rank: "ğŸ… Rank: %s",
    maxRank: "ğŸ”¥ You have reached the highest rank! Keep earning points to maintain your position at the top! ğŸš€",
    backToMenu: "ğŸ”™ Back to Menu",
    selectOption: "ğŸ‘‡ Select an option:",
    motivation: "ğŸ’¡ Keep going, you're doing great!",
    rankProgress: "ğŸ”² *Points Progress:* ",
    ranks: {
      legend: "ğŸ‘‘ Legend | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ Master | ğŸ©âœ¨",
      expert: "â­ Expert | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ Intermediate | ğŸ®âš¡",
      novice: "ğŸŒ± Novice | ğŸš€ğŸ”°"
    }
  },
  es: {
    notRegistered: "âš ï¸ Primero debes registrarte usando /register.",
    profileHeader: "ğŸ“„ Perfil de Usuario",
    username: "ğŸ‘¤ Nombre de usuario: %s",
    points: "ğŸ’° Puntos acumulados: %d",
    rank: "ğŸ… Rango: %s",
    maxRank: "ğŸ”¥ Â¡Has alcanzado el rango mÃ¡s alto! Sigue ganando puntos para mantenerte en la cima. ğŸš€",
    backToMenu: "ğŸ”™ Volver al MenÃº",
    selectOption: "ğŸ‘‡ Selecciona una opciÃ³n:",
    motivation: "ğŸ’¡ Â¡Sigue asÃ­, vas genial!",
    rankProgress: "ğŸ”² *Progreso de Puntos:* ",
    ranks: {
      legend: "ğŸ‘‘ Leyenda | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ Maestro | ğŸ©âœ¨",
      expert: "â­ Experto | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ Intermedio | ğŸ®âš¡",
      novice: "ğŸŒ± Novato | ğŸš€ğŸ”°"
    }
  },
  ru: {
    notRegistered: "âš ï¸ Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ /register.",
    profileHeader: "ğŸ“„ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ",
    username: "ğŸ‘¤ Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ: %s",
    points: "ğŸ’° ĞĞ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾Ñ‡ĞºĞ¸: %d",
    rank: "ğŸ… Ğ Ğ°Ğ½Ğ³: %s",
    maxRank: "ğŸ”¥ Ğ’Ñ‹ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³Ğ»Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ³Ğ¾ Ñ€Ğ°Ğ½Ğ³Ğ°! ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ°Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‡ĞºĞ¸, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾ÑÑ‚Ğ°Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ²ĞµÑ€ÑˆĞ¸Ğ½Ğµ! ğŸš€",
    backToMenu: "ğŸ”™ Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² Ğ¼ĞµĞ½Ñ",
    selectOption: "ğŸ‘‡ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚:",
    motivation: "ğŸ’¡ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ğ¹Ñ‚Ğµ, Ñƒ Ğ²Ğ°Ñ Ğ²ÑÑ‘ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑÑ!",
    rankProgress: "ğŸ”² *ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ¾Ñ‡ĞºĞ¾Ğ²:* ",
    ranks: {
      legend: "ğŸ‘‘ Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ° | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ ĞœĞ°ÑÑ‚ĞµÑ€ | ğŸ©âœ¨",
      expert: "â­ Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚ | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ | ğŸ®âš¡",
      novice: "ğŸŒ± ĞĞ¾Ğ²Ğ¸Ñ‡Ğ¾Ğº | ğŸš€ğŸ”°"
    }
  },
  hi: {
    notRegistered: "âš ï¸ à¤ªà¤¹à¤²à¥‡ à¤†à¤ªà¤•à¥‹ /register à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤•à¥‡ à¤ªà¤‚à¤œà¥€à¤•à¤°à¤£ à¤•à¤°à¤¨à¤¾ à¤¹à¥‹à¤—à¤¾à¥¤",
    profileHeader: "ğŸ“„ à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤ªà¥à¤°à¥‹à¤«à¤¼à¤¾à¤‡à¤²",
    username: "ğŸ‘¤ à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤®: %s",
    points: "ğŸ’° à¤œà¤®à¤¾ à¤•à¤¿à¤ à¤—à¤ à¤…à¤‚à¤•: %d",
    rank: "ğŸ… à¤°à¥ˆà¤‚à¤•: %s",
    maxRank: "ğŸ”¥ à¤†à¤ªà¤¨à¥‡ à¤‰à¤šà¥à¤šà¤¤à¤® à¤°à¥ˆà¤‚à¤• à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤° à¤²à¤¿à¤¯à¤¾ à¤¹à¥ˆ! à¤¶à¥€à¤°à¥à¤· à¤ªà¤° à¤¬à¤¨à¥‡ à¤°à¤¹à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤‚à¤• à¤…à¤°à¥à¤œà¤¿à¤¤ à¤•à¤°à¤¤à¥‡ à¤°à¤¹à¥‡à¤‚! ğŸš€",
    backToMenu: "ğŸ”™ à¤®à¥‡à¤¨à¥‚ à¤ªà¤° à¤µà¤¾à¤ªà¤¸ à¤œà¤¾à¤à¤‚",
    selectOption: "ğŸ‘‡ à¤à¤• à¤µà¤¿à¤•à¤²à¥à¤ª à¤šà¥à¤¨à¥‡à¤‚:",
    motivation: "ğŸ’¡ à¤šà¤²à¤¤à¥‡ à¤°à¤¹à¥‡à¤‚, à¤†à¤ª à¤…à¤šà¥à¤›à¤¾ à¤•à¤° à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚!",
    rankProgress: "ğŸ”² *à¤…à¤‚à¤• à¤ªà¥à¤°à¤—à¤¤à¤¿:* ",
    ranks: {
      legend: "ğŸ‘‘ à¤•à¤¿à¤‚à¤µà¤¦à¤‚à¤¤à¥€ | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ à¤®à¤¾à¤¸à¥à¤Ÿà¤° | ğŸ©âœ¨",
      expert: "â­ à¤µà¤¿à¤¶à¥‡à¤·à¤œà¥à¤ | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ à¤®à¤§à¥à¤¯à¤µà¤°à¥à¤¤à¥€ | ğŸ®âš¡",
      novice: "ğŸŒ± à¤¨à¥Œà¤¸à¤¿à¤–à¤¿à¤¯à¤¾ | ğŸš€ğŸ”°"
    }
  },
  zh: {
    notRegistered: "âš ï¸ é¦–å…ˆï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ /register æ³¨å†Œã€‚",
    profileHeader: "ğŸ“„ ç”¨æˆ·èµ„æ–™",
    username: "ğŸ‘¤ ç”¨æˆ·å: %s",
    points: "ğŸ’° ç´¯ç§¯ç§¯åˆ†: %d",
    rank: "ğŸ… æ’å: %s",
    maxRank: "ğŸ”¥ æ‚¨å·²è¾¾åˆ°æœ€é«˜æ’åï¼ç»§ç»­èµšå–ç§¯åˆ†ä»¥ä¿æŒåœ¨é¡¶ç«¯ï¼ ğŸš€",
    backToMenu: "ğŸ”™ è¿”å›èœå•",
    selectOption: "ğŸ‘‡ é€‰æ‹©ä¸€ä¸ªé€‰é¡¹:",
    motivation: "ğŸ’¡ ç»§ç»­å‰è¿›ï¼Œåšå¾—å¾ˆå¥½ï¼",
    rankProgress: "ğŸ”² *ç§¯åˆ†è¿›åº¦:* ",
    ranks: {
      legend: "ğŸ‘‘ ä¼ å¥‡ | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ å¤§å¸ˆ | ğŸ©âœ¨",
      expert: "â­ ä¸“å®¶ | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ ä¸­çº§ | ğŸ®âš¡",
      novice: "ğŸŒ± æ–°æ‰‹ | ğŸš€ğŸ”°"
    }
  },
  ja: {
    notRegistered: "âš ï¸ ã¾ãšã€/register ã‚’ä½¿ã£ã¦ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚",
    profileHeader: "ğŸ“„ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
    username: "ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼å: %s",
    points: "ğŸ’° ç´¯ç©ãƒã‚¤ãƒ³ãƒˆ: %d",
    rank: "ğŸ… ãƒ©ãƒ³ã‚¯: %s",
    maxRank: "ğŸ”¥ æœ€ä¸Šç´šãƒ©ãƒ³ã‚¯ã«é”ã—ã¾ã—ãŸï¼ãƒˆãƒƒãƒ—ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã—ç¶šã‘ã¾ã—ã‚‡ã†ï¼ ğŸš€",
    backToMenu: "ğŸ”™ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹",
    selectOption: "ğŸ‘‡ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸ã‚“ã§ãã ã•ã„:",
    motivation: "ğŸ’¡ é ‘å¼µã‚Šç¶šã‘ã¦ãã ã•ã„ã€é †èª¿ã§ã™ï¼",
    rankProgress: "ğŸ”² *ãƒã‚¤ãƒ³ãƒˆé€²æ—:* ",
    ranks: {
      legend: "ğŸ‘‘ ä¼èª¬ | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ ãƒã‚¹ã‚¿ãƒ¼ | ğŸ©âœ¨",
      expert: "â­ ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ ä¸­ç´š | ğŸ®âš¡",
      novice: "ğŸŒ± åˆå¿ƒè€… | ğŸš€ğŸ”°"
    }
  },
  ar: {
    notRegistered: "âš ï¸ Ø£ÙˆÙ„Ø§Ù‹ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… /register.",
    profileHeader: "ğŸ“„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…",
    username: "ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: %s",
    points: "ğŸ’° Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…Ø©: %d",
    rank: "ğŸ… Ø§Ù„Ø±ØªØ¨Ø©: %s",
    maxRank: "ğŸ”¥ Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø±ØªØ¨Ø©! Ø§Ø³ØªÙ…Ø± ÙÙŠ ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù…ÙƒØ§Ù†ØªÙƒ ÙÙŠ Ø§Ù„Ù‚Ù…Ø©! ğŸš€",
    backToMenu: "ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",
    selectOption: "ğŸ‘‡ Ø§Ø®ØªØ± Ø®ÙŠØ§Ø±Ù‹Ø§:",
    motivation: "ğŸ’¡ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ØŒ Ø£Ù†Øª ØªØ¨Ù„ÙŠ Ø¨Ù„Ø§Ø¡Ù‹ Ø­Ø³Ù†Ù‹Ø§!",
    rankProgress: "ğŸ”² *ØªÙ‚Ø¯Ù… Ø§Ù„Ù†Ù‚Ø§Ø·:* ",
    ranks: {
      legend: "ğŸ‘‘ Ø£Ø³Ø·ÙˆØ±Ø© | ğŸ­ ğŸ”¥",
      master: "ğŸ”¥ Ù…Ø§Ø³ØªØ± | ğŸ©âœ¨",
      expert: "â­ Ø®Ø¨ÙŠØ± | ğŸ§ ğŸ’¡",
      intermediate: "ğŸ¯ Ù…ØªÙˆØ³Ø· | ğŸ®âš¡",
      novice: "ğŸŒ± Ù…Ø¨ØªØ¯Ø¦ | ğŸš€ğŸ”°"
    }
  }
};

var userData = Bot.getProperty("user_" + user.telegramid);
if (!userData) {
  Bot.sendMessage(messages[lang].notRegistered);
  return;
}

// Definir rangos con mÃ¡s emojis para mayor interacciÃ³n
var rank;
if (userData.points >= 20000) {
  rank = messages[lang].ranks.legend;
} else if (userData.points >= 15000) {
  rank = messages[lang].ranks.master;
} else if (userData.points >= 10000) {
  rank = messages[lang].ranks.expert;
} else if (userData.points >= 6000) {
  rank = messages[lang].ranks.intermediate;
} else {
  rank = messages[lang].ranks.novice;
}

// Crear la barra de progreso de puntos con validaciones
var progressBars = Math.floor(userData.points / 1000);
progressBars = Math.min(progressBars, 5);
progressBars = Math.max(progressBars, 0);

var progress = "ğŸŒ‘".repeat(progressBars) + "ğŸŒ•".repeat(5 - progressBars);

// Mensaje del perfil
var profileMessage = "ğŸ” " + messages[lang].profileHeader + "\n\n" +
messages[lang].username.replace("%s", userData.username || "ğŸ•¶ï¸ Desconocido") + "\n" +
messages[lang].points.replace("%d", userData.points || 0) + "\n" +
messages[lang].rank.replace("%s", rank) + "\n" +
messages[lang].rankProgress + progress + "\n" +
messages[lang].motivation + "\n";

if (userData.points >= 20000) {
  profileMessage += "\nğŸ‰ " + messages[lang].maxRank;
}

Bot.sendMessage(profileMessage);

var keyboard = [[{ title: "ğŸ  " + messages[lang].backToMenu, command: "/start" }]];
Bot.sendInlineKeyboard(keyboard, messages[lang].selectOption);
